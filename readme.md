## Mutation Testing of Simulink Models using Large Language Models

This repository contains the code and datasets used in the paper "Mutation Testing of Simulink Models using Large Language
Models". 

![Example Image](src/pipeline.pdf)

## Abstract

Recently, large language models (LLMs) have been used to automate and improve software testing activities, including mutation testing -- a well-established technique for assessing test suites. While this effort mainly targets software represented in text-based programming languages, it is unclear how LLMs perform in testing graphical modeling languages such as Simulink, widely used in the cyber-physical systems (CPS) domain. This paper presents approach, an approach that uses a pre-trained language model, CodeBERT, to generate mutants for Simulink models. \approach\ converts Simulink models into textual representations, masks tokens from the derived text, and uses a version of CodeBERT pre-trained on a large corpse textual information extracted from Simulink models to predict the masked tokens. The mutants are obtained by replacing the masked tokens with the pre-trained CodeBERT predictions. We evaluate SimuBERT by applying it to public-domain Simulink model benchmark from the CPS industry. Our results show that \textcolor{blue}{TBD}

## Folder Structure

```bash
├── data
│   ├── pretrain # data for pretraining on CodeBERT
│   ├── saved_model # save the pretrained model as SimuBERT
│   ├── mask-mutate # data for mutating Simulink models using SimuBERT
├── src
│   ├── 1.pretrain # code for pretraining CodeBERT on Simulink text-format corpus to obtain SimuBERT
│   ├── 2.mask-mutate # mask tokens of Simulink models and use SimuBERT to make predictions
│   ├── 3.inject faluts # inject the faluts generated by SimuBERT to obtain mutants
│   ├── 4.mutation testing # do property-based mutation testing
│   └── 5.visualization # visualize the results of mutants and test cases
├── results
│   ├── mutants model # generated mutants for each Simulink model
│   ├── visualization # visualization pie charts
├── scripts
└── supplementary_materials
```

- `data`: Contains the datasets used in the paper.
- `src`: Contains the source code of the paper.
- `scripts`: Contains the scripts used to generate the results in the paper.

## Supplementary Materials

The supplementary materials for the paper containing additional results ...

## All data and models

Due to size limit, we put all data, models and outputs  in [this link](https://drive.google.com/file/d/179SQPOguBYUbkRM76NkgXqVqBQp5-KKI/view)

.

## Getting Started

To reproduce the results in the paper, follow these steps:

1. Clone the repository.
2. Install the required dependencies by running `pip install -r requirements.txt`.
3. Run the scripts in the following order: 
   1. In Python compiler, ```bash pretrain.sh```
   2. In Python compiler, ```bash mask-mutate.sh```
   3. In Matlab compiler, cd /src/3.inject faluts, for each model, ```run m_update_block.m```
   4. In Matlab compiler, cd /src/4.mutation testing, cd each model, ```run run_all.m```

## Citation

If you use this code or the datasets in your research, please cite the following paper:

```
@inproceedings{paper,
title = {Mutation Testing of Simulink Models using Large Language Models},
author = {Anonymous},
booktitle = {???},
year = {2024},
}
```
